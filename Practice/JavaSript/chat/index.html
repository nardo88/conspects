<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/style.css">

</head>
<body>

<h1>Чат с использованием localStorage</h1>
<div class="chat_wrapper">
	<div class="chat">
		<ul class="chat_content">
			
		</ul>
	</div>
	<div class="chat_control">
		<div>
			<input class="sender" type="text" placeholder="Ваше имя" >
		</div>
		<div class="cont_wr">
			<textarea name="" id="text_message" rows="2" placeholder="Сообщение"></textarea>
			<input class="send_message" type="button" value="Send">
		</div>
	</div>
</div>

<h1>Разбор</h1>
<p>Рассмотрим код html</p>
<br>
<img src="images/prim1.jpg" alt="">
<br>
<p>Тут у нас следующие классы которые мы будем использовать в JavaScript:
<ul>
	<li><b>.send_message</b> - кнопка отправки сообщений</li>
	<li><b>#text_message</b> - поле ввода сообщения</li>
	<li><b>.sender</b> - поле ввода имени отправителя</li>
	<li><b>.chat_content</b> - список UL в котором будут отображаться сообщения и отправитель</li>
</ul>
</p>
<br><br>
<p>Теперь рассмотрим код JavaScript</p>
<br>
<img src="images/prim2.jpg" alt="">
<br>
<p><span class="first">строки 1-6</span> - на этом участке мы объявляем переменные что бы получить доступ к нашим элементам. Так же на строчке 6 мы объявляем массив <b>masseges</b> в который будем помещать объекты <b>	message</b>. 
</p>
<p>Объектом <b>message</b> у нас будет сообщение в чате которое будет содержать имя отправителя и собственно само сообщение.</p>
<br>
<p>С чего лучше начать? начнем с события клик по кнопке <span class="first">строчки 13-29</span>. По нажатии на кнопку мы запускаем условный оператор, в котором будем проверять заполнены ли поля имени пользователя и сообщения. Если нет то будет вызываться метод alert, если да то будет выполняться код.</p>
<br>
<p>Первое что мы делаем ( <span class="first">сточки 18-21</span>) это объявляем наш объект <b>message</b> и говорим что у объекта два свойства которые принимают значение value наших полей ввода (имя и сообщение).</p>
<br>
<p>Затем (<span class="first">сточка 23</span>) мы обращаемся к нашему массиву <b>masseges</b> и вызываем метод <b>push</b> (добавление элемента в конец массива) и входящим параметром ставим наш объект.</p>
<br>
<p>Теперь нам надо отобразить данные на экране чата. За это у нас будет отвечать функция <b>displayMessage</b> (<span class="first">сточки 31-42</span>).</p>
<br>
<p>внутри этой функции мы запускаем метод <b>forEach</b> который будет перебирать весь массив <b>masseges</b> и каждый элемент массива будет помещаться в переменную <b>mess</b>. Записывать в переменную мы будем используя строковую интерполяцию. В этом случае мы сможем использовать выражения внутри текст html</p>
<br>
<p>Итак текст будет содержать в себе тег li списка в который помещаются два параграфа с классами: name и message (этим классам мы присвоили определенные стили в CSS). Внутрь параграфов мы помещаем значения нашх полей ввода имени и самого сообщения.</p>
<br>
<p>Далее мы обращаемся к переменной которая является объектом тега ul и с помощью метода innerHTML помещаем в нее значение переменной <b>mess</b>(<span class="first">сточка 40</span>)</p>
<br>
<p>НА что здесь надо обратить внимание? переменную <b>mess</b> мы должны объявить за пределами перебора forEahc, более того каждый раз при объявлении надо будет указывать в нее пустое значение. А внутри перебора мы не просто помещаем в нее тег li а конгатинируем его туда (не = , а += )</p>
<br>
<p>Теперь вернемся к события нажатия на кнопку.</p>
<br>
<p>После того как мы отобразили данные в окне чата, нам надо эти данные записать в localStorage. Для этого вызываем localStorage и применяем к нему метод setItem. Входящим параметром методу даем имя ключа "chat" и переведенный в формат JSON наш массив в котором хранятся все наши сообщения.</p>
<br>
<p>В завершении мы очищаем поле text_message</p>
<br>
<p>Теперь как сделать так что бы при обновлении страницы у нас данные из localStorage попадали в окно чата?</p>
<br>
<p>После объявления переменных мы вставляем оператор условия (если в localStorage есть данные с ключом "chat" , то мы записываем все эти данные в наш массив. А после этого вызываем функцию которая заполняет наше окно чата) <span class="first">Строчки 8-11</span></p>




	

<script src="js/jquery.js"></script>
<script src="js/script.js"></script>
</body>
</html>