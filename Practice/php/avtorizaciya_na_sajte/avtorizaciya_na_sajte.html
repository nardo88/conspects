<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<h2>Авторизация на сайте</h2>
	<p>Для начала работы немного подкорректируем то, что мы сделали в прошлом примере. А именно:</p>
	<img src="prim1.jpg" alt="">
	<p>в конце нашей формы добавим ссылку с надписью <b>Login</b> (авторизация) и добавим немного стилей для этой ссылки.</p>
	<img src="prim2.jpg" alt="">
	<p>Далее создадим два файла login.php и logout.php. Первый файл  - это наша страница авторизации, а второй мы будем использовать для выхода из "личного кабинета"</p>
	<p>Рассмотрим код html файла login.php</p>
	<img src="prim3.jpg" alt="">
	<p>Здесь у нас так же форма с двумя полями ввода (login и password), кнопка submit и ссылка на главную страницу index.php</p>
	<p>Теперь рассмотрим код php</p>
	<img src="prim4.jpg" alt="">
	<p>Первая строчка с текстом session_start() говорит о том, что мы открыли сессию. Для чего это надо? для того что бы пользователь находился авторизованным на сайте до тех пор пока не нажмет выйти. Эту строку обязательно надо помещать в самое начало перед html кодом, иначе будет вылезать ошибка.</p>
	<p>Дале две строки те же что были у нас в предыдущем разборе, мы объявили две переменные в которые поместили результат функций присоединения к серверу с БД и к базе данных "Practice"</p>
	<p>Далее тот же оператор срвнения <b>if</b>: если атрибуты ассоциативного массива с индексами username и password существуют то мы создаем переменные <b>$username</b> и <b>$password</b> и помещаем в них значения этих атрибутов, после чего создаем переменную <b>$query</b> которая помещает в себя SQL запрос на выборку данных из таблицы username где поле username будет соответсвовать значению переменной $username и значение поля password будет соответствовать значению переменной $password.</p>
	<p>Затем мы создаем переменную <b>result</b> - и помещаем в нее результат функции <b>mysqli_query</b> с входными параметрами переменная с информацией о конекте и переменная с SQL запросом. Текст <b>ore die</b> означает что если $result получит значение false то выполнится код mysqli_error($connection) т.е. переменной result достанется значение сообщения об ошибке.</p>
	<p>Далее мы создаем переменную <b>$count</b>. в нее мы помещаем результат функции <b>mysqli_num_rows</b>, эта функция возвращает количество строк с совпадением выборки. Так как у нас в базе имя пользователя стаит unique (уникальный), то значение может быть либо 1 либо 0. Так вот дальше у нас идет оператор условия: если <b>$count</b> равно 1 то в сессию записывается значение имени пользователя и эта информация будет храниться на сервере, иначе выдается текст с ошибкой.</p>
	<p>В конце кода мы добавлчем раздел который нам будет показывать что пользователь авторизован. Здесь у нас оператор <b>if</b>. Если существует атрибут массива $_SESSION username то переменной $username присваивается начение username из сессии и выводится на экран три записи: "Hello", " вы вошли" и ссылка с указателем "Выйти". ссылка ведет к php файлу logout.php</p>
	<p>Рассмотрим код файла logout.php</p>
	<img src="prim5.jpg" alt="">
	<p>здесь мы так же открываем сессию. Затем сессию тут же закрываем (session_destroy) и с помощью редиректа header переводим пользователя на страницу index.php.</p>
</body>
</html>